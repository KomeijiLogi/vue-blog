<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>KomeijiLogi | http缓存</title>
    <meta name="description" content="to be an explorer of the code">
    <link rel="icon" href="/vue-blog/logo.png">
  <link rel="manifest" href="/vue-blog/manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/vue-blog/icons/apple-touch-icon-152x152.png">
  <link rel="mask-icon" href="/vue-blog/icons/safari-pinned-tab.svg" color="#3eaf7c">
  <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/vue-blog/assets/css/0.styles.362a7fb6.css" as="style"><link rel="preload" href="/vue-blog/assets/js/app.c9fd4dc9.js" as="script"><link rel="preload" href="/vue-blog/assets/js/31.f3da6852.js" as="script"><link rel="prefetch" href="/vue-blog/assets/js/18.042a3282.js"><link rel="prefetch" href="/vue-blog/assets/js/1.43ccfe08.js"><link rel="prefetch" href="/vue-blog/assets/js/2.f391e5e0.js"><link rel="prefetch" href="/vue-blog/assets/js/3.a829032f.js"><link rel="prefetch" href="/vue-blog/assets/js/4.f85892ee.js"><link rel="prefetch" href="/vue-blog/assets/js/5.a72b35cf.js"><link rel="prefetch" href="/vue-blog/assets/js/6.62411112.js"><link rel="prefetch" href="/vue-blog/assets/js/7.c56868d0.js"><link rel="prefetch" href="/vue-blog/assets/js/8.277635e3.js"><link rel="prefetch" href="/vue-blog/assets/js/9.dfd71603.js"><link rel="prefetch" href="/vue-blog/assets/js/10.2c539b88.js"><link rel="prefetch" href="/vue-blog/assets/js/11.e5dc09ef.js"><link rel="prefetch" href="/vue-blog/assets/js/12.c8866a4a.js"><link rel="prefetch" href="/vue-blog/assets/js/13.160ce8e7.js"><link rel="prefetch" href="/vue-blog/assets/js/14.7979f40f.js"><link rel="prefetch" href="/vue-blog/assets/js/15.927563ee.js"><link rel="prefetch" href="/vue-blog/assets/js/16.6b2079d1.js"><link rel="prefetch" href="/vue-blog/assets/js/17.45b79c3a.js"><link rel="prefetch" href="/vue-blog/assets/js/19.f94f4c24.js"><link rel="prefetch" href="/vue-blog/assets/js/20.b6e4e9a0.js"><link rel="prefetch" href="/vue-blog/assets/js/21.b7559d6d.js"><link rel="prefetch" href="/vue-blog/assets/js/22.33bc136e.js"><link rel="prefetch" href="/vue-blog/assets/js/23.8b0e2cc9.js"><link rel="prefetch" href="/vue-blog/assets/js/24.832685d0.js"><link rel="prefetch" href="/vue-blog/assets/js/25.4db885a0.js"><link rel="prefetch" href="/vue-blog/assets/js/26.117d73fa.js"><link rel="prefetch" href="/vue-blog/assets/js/27.e57fad7a.js"><link rel="prefetch" href="/vue-blog/assets/js/28.0caaba11.js"><link rel="prefetch" href="/vue-blog/assets/js/29.842303cb.js"><link rel="prefetch" href="/vue-blog/assets/js/30.798942bb.js"><link rel="prefetch" href="/vue-blog/assets/js/32.68f3f07f.js"><link rel="prefetch" href="/vue-blog/assets/js/33.f7cd6039.js"><link rel="prefetch" href="/vue-blog/assets/js/34.d8c913cc.js"><link rel="prefetch" href="/vue-blog/assets/js/35.798fc053.js"><link rel="prefetch" href="/vue-blog/assets/js/36.d3110af2.js">
    <link rel="stylesheet" href="/vue-blog/assets/css/0.styles.362a7fb6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/vue-blog/" class="home-link router-link-active"><!----><span class="site-name">
      KomeijiLogi
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/vue-blog/blog/" class="nav-link router-link-active">博客</a></div><div class="nav-item"><a href="/vue-blog/project/" class="nav-link">项目</a></div><div class="nav-item"><a href="/vue-blog/introduce/" class="nav-link">简介</a></div><a href="https://github.com/KomeijiLogi/vue-blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vue-blog/blog/" class="nav-link router-link-active">博客</a></div><div class="nav-item"><a href="/vue-blog/project/" class="nav-link">项目</a></div><div class="nav-item"><a href="/vue-blog/introduce/" class="nav-link">简介</a></div><a href="https://github.com/KomeijiLogi/vue-blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>博客</span><!----></p><ul class="sidebar-group-items"><li><a href="/vue-blog/blog/" class="sidebar-link">介绍</a></li><li><a href="/vue-blog/blog/await-async.html" class="sidebar-link">es7 中的await/async</a></li><li><a href="/vue-blog/blog/iconfont.html" class="sidebar-link">iconfont的使用</a></li><li><a href="/vue-blog/blog/jquery-fadein-out.html" class="sidebar-link">jquery 中fade-out与fade-in的坑</a></li><li><a href="/vue-blog/blog/npm.html" class="sidebar-link">npm使用的几个技巧</a></li><li><a href="/vue-blog/blog/eventloop.html" class="sidebar-link">js中event loop机制的理解</a></li><li><a href="/vue-blog/blog/pic.html" class="sidebar-link">图片防盗链以及不同源的数据访问解决方案</a></li><li><a href="/vue-blog/blog/cache.html" class="active sidebar-link">http缓存</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue-blog/blog/cache.html#前言" class="sidebar-link">前言</a></li><li class="sidebar-sub-header"><a href="/vue-blog/blog/cache.html#_1-缓存存在的意义" class="sidebar-link">1.缓存存在的意义</a></li><li class="sidebar-sub-header"><a href="/vue-blog/blog/cache.html#_2-缓存的命中和未命中" class="sidebar-link">2.缓存的命中和未命中</a></li><li class="sidebar-sub-header"><a href="/vue-blog/blog/cache.html#_3-缓存类型" class="sidebar-link">3.缓存类型</a></li><li class="sidebar-sub-header"><a href="/vue-blog/blog/cache.html#缓存处理逻辑" class="sidebar-link">缓存处理逻辑</a></li><li class="sidebar-sub-header"><a href="/vue-blog/blog/cache.html#参考文献" class="sidebar-link">参考文献</a></li></ul></li></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="http缓存"><a href="#http缓存" aria-hidden="true" class="header-anchor">#</a> http缓存</h1><h2 id="前言"><a href="#前言" aria-hidden="true" class="header-anchor">#</a> 前言</h2><p>之前对http的缓存不够明晰，经常遇到在服务器上更新了文件，网页端却没有加载新文件，而是加载了缓存文件，导致出现各种问题</p><p>虽然可以在连接上加入时间戳，让缓存强制失效，但这等同于不使用缓存机制，那么鱼（频繁更新）与熊掌（缓存）能否得兼呢？</p><h2 id="_1-缓存存在的意义"><a href="#_1-缓存存在的意义" aria-hidden="true" class="header-anchor">#</a> 1.缓存存在的意义</h2><h3 id="冗余的数据传输"><a href="#冗余的数据传输" aria-hidden="true" class="header-anchor">#</a> 冗余的数据传输</h3><p>假设不使用缓存，比如链接上加入时间戳，那么每次打开页面都作为一个新的页面去打开，可能与上一次加载的页面数据相同，但也会
重复请求，那么这多余的数据传输，不仅会增加服务器的压力，而且会使网页端跑更多的流量，这在移动端web开发上是很致命的，而
缓存的意义就是在页面没有发生更新的时候，不进行冗余的数据传输，读取之前缓存的内容就行，减少服务器的压力</p><h3 id="带宽瓶颈"><a href="#带宽瓶颈" aria-hidden="true" class="header-anchor">#</a> 带宽瓶颈</h3><p>缓存的另一个作用就是解决带宽的问题，比如涉及的资源文件较大，那么直接请求服务器加载资源文件必然会占用大量带宽， 而从缓存
中读取相应资源文件就会快很多，这也是间接减少带宽带来的页面加载缓慢问题，不需要更多的带宽就能快速加载页面</p><h3 id="瞬间拥塞"><a href="#瞬间拥塞" aria-hidden="true" class="header-anchor">#</a> 瞬间拥塞</h3><p>缓存的作用之一就是减少了不必要的请求，那么处理网页短时间内高并发的时候，缓存就能突显出其意义，瞬间拥塞指的是短时间内大量
用户对服务器的访问，造成服务器阻塞，无法及时对用户请求做出响应，当然主要解决方案TCP的四种算法（慢开始,拥塞避免,快重传,快恢复
），缓存只是在一定程度上缓解这种问题</p><h3 id="距离时延"><a href="#距离时延" aria-hidden="true" class="header-anchor">#</a> 距离时延</h3><p>除了带宽会对页面加载造成影响，带宽小的加载大文件自然慢，距离也会对页面加载造成影响，这就是传输时延问题，而直接加载缓存也能
解决传输时延问题带来的影响，这是不言而喻的</p><h2 id="_2-缓存的命中和未命中"><a href="#_2-缓存的命中和未命中" aria-hidden="true" class="header-anchor">#</a> 2.缓存的命中和未命中</h2><h3 id="缓存未命中"><a href="#缓存未命中" aria-hidden="true" class="header-anchor">#</a> 缓存未命中</h3><p>两种情况：
1.缓存必须是在用户访问过一次才能产生，所以第一次访问页面是缓存未命中，直接从服务器上获取资源</p><p>2.再次访问通过http首部字段验证不满足使用缓存的条件，比如no-cache</p><h3 id="缓存命中"><a href="#缓存命中" aria-hidden="true" class="header-anchor">#</a> 缓存命中</h3><p>缓存直接命中，这种情况也叫浏览器缓存命中（强缓存命中），这种直接返回状态码200（from cache）（摘录自文献4）</p><h3 id="缓存再验证命中"><a href="#缓存再验证命中" aria-hidden="true" class="header-anchor">#</a> 缓存再验证命中</h3><p>缓存再验证命中，这种也叫做协商缓存命中，在强缓存验证不通过的情况下，会像服务器端发送一个协商缓存验证的信息，
如果此时服务器发现请求资源未修改，则返回状态码304（Not Modified）告知服务器从缓存中获取资源并更新协商缓存信息。
这种情况通缓存未命中的第二种情况相对应。  （摘录自文献4）</p><h2 id="_3-缓存类型"><a href="#_3-缓存类型" aria-hidden="true" class="header-anchor">#</a> 3.缓存类型</h2><h3 id="强缓存"><a href="#强缓存" aria-hidden="true" class="header-anchor">#</a> 强缓存</h3><p>(待补充)</p><h3 id="协商缓存"><a href="#协商缓存" aria-hidden="true" class="header-anchor">#</a> 协商缓存</h3><p>(待补充)</p><h2 id="缓存处理逻辑"><a href="#缓存处理逻辑" aria-hidden="true" class="header-anchor">#</a> 缓存处理逻辑</h2><p>可以在资源内容发生变化时更改它的网址，强制用户下载新响应。比如添加时间戳
通常情况下，可以通过在文件名中嵌入文件的指纹或版本号来实现 - 例如 style.x234dff.css。
而gulp-rev 2 添加文件指纹 便是一般思路，这样会请求后匹配指纹，如果指纹相同，那么读取缓存，
指纹不同，那么作为新文件拉取。</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>给资源文件添加文件指纹</p><p>a.png → a-f7ee61d96b.png（文件名方式）</p><p>a.png → a.png?<em>v</em>=f7ee61d96b（url参数方式）</p></div><h2 id="参考文献"><a href="#参考文献" aria-hidden="true" class="header-anchor">#</a> 参考文献</h2><p><a href="https://juejin.im/post/5ae081aaf265da0b767d263a" target="_blank" rel="noopener noreferrer">你应该知道的前端——缓存</a></p><p><a href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching?hl=zh-cn" target="_blank" rel="noopener noreferrer">http缓存</a></p><p><a href="https://www.cnblogs.com/lyzg/p/5125934.html#_label4" target="_blank" rel="noopener noreferrer">浏览器缓存知识小结及应用</a></p><p><a href="http://www.yzmspirit.com/2017/03/28/http%E7%88%86%E7%82%B8%E9%87%8D%E7%82%B9%E5%AD%A6%E4%B9%A0%E2%80%94%E2%80%94%E7%BC%93%E5%AD%98/" target="_blank" rel="noopener noreferrer">http爆炸重点学习——缓存</a></p></div><div class="content edit-link"><a href="https://github.com/KomeijiLogi/vue-blog/edit/master/docs/blog/cache.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><div class="content page-nav"><p class="inner"><span class="prev">
        ← <a href="/vue-blog/blog/pic.html" class="prev">
          图片防盗链以及不同源的数据访问解决方案
        </a></span><!----></p></div></div></div></div>
    <script src="/vue-blog/assets/js/31.f3da6852.js" defer></script><script src="/vue-blog/assets/js/app.c9fd4dc9.js" defer></script>
  </body>
</html>
